<ion-content [fullscreen]="true">
  <div class="dashboard-container">
    <!-- Encabezado del Dashboard -->
    <header class="dashboard-header">
      <div class="header-content">
        <h1 class="page-title">Repertorio </h1>
        <p class="subtitle">{{ filteredSongs.length }} canciones disponibles</p>
      </div>
      
      <div class="actions-toolbar">
        <div class="search-wrapper">
          <ion-icon name="search-outline"></ion-icon>
          <input 
            type="text" 
            placeholder="Buscar canci贸n..." 
            [(ngModel)]="searchTerm" 
            (input)="filterSongs()"
          >
        </div>
        
    <div class="action-buttons">
          <button class="icon-btn add-btn" (click)="openAddSongModal()" title="Agregar Canci贸n">
            <ion-icon name="add"></ion-icon>
          </button>
          <button class="icon-btn select-btn" (click)="toggleConfirmationButtons()" title="Seleccionar">
            <ion-icon name="checkmark-circle-outline"></ion-icon>
          </button>
          <button class="icon-btn list-btn" (click)="showLists()" title="Ver Listas">
            <ion-icon name="list-outline"></ion-icon>
            <!-- <ion-badge *ngIf="getSelectedCount() > 0" color="danger">{{ getSelectedCount() }}</ion-badge> -->
          </button>
        </div>
      </div>
    </header>

    <!-- Barra de Acciones de Selecci贸n -->
    <div class="confirmation-container" *ngIf="showConfirmationButtons">
        <div class="confirm-content">
          <p>Seleccionadas: {{ getSelectedCount() }}</p>
        </div>
        <div class="confirmation-buttons">
            <button class="confirm-btn add-list" (click)="showLists()">
                <ion-icon name="list-outline"></ion-icon>
                Agregar
            </button>
            <button class="confirm-btn delete" (click)="presentDeleteConfirm()">
                <ion-icon name="trash-outline"></ion-icon>
                Eliminar
            </button>
            <button class="confirm-btn cancel" (click)="cancelSelectedSongs()">
                <ion-icon name="close-outline"></ion-icon>
            </button>
        </div>
    </div>

    <!-- Grid de Canciones -->
    <div class="songs-grid-container">
      <div class="songs-grid" *ngIf="filteredSongs.length > 0">
        <div 
          class="song-card" 
          *ngFor="let song of filteredSongs; trackBy: trackById"
          [class.selected]="song.selected"
          (click)="showConfirmationButtons ? (song.selected = !song.selected) : openSongPage(song.id)"
        >
          <div class="card-content">
            <div class="icon-box">
              <ion-icon name="musical-note"></ion-icon>
            </div>
            <h3 class="song-title">{{ song.name }}</h3>
            
            <!-- Checkbox overlay for selection mode -->
            <div class="selection-overlay" *ngIf="showConfirmationButtons">
              <div class="checkbox" [class.checked]="song.selected">
                <ion-icon name="checkmark" *ngIf="song.selected"></ion-icon>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Estado Vac铆o -->
      <div *ngIf="filteredSongs.length === 0" class="empty-state">
          <div class="empty-icon">
            <ion-icon name="musical-notes-outline"></ion-icon>
          </div>
          <h3>No se encontraron canciones</h3>
          <p>Intenta con otra b煤squeda o agrega una nueva canci贸n al repertorio.</p>
      </div>
    </div>
  </div>
</ion-content>
